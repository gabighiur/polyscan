{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { TagsWithInnerContent, SelfClosingTags, computeHashes } from '@unhead/shared';\nfunction propsToString(props) {\n  const handledAttributes = [];\n  for (const [key, value] of Object.entries(props)) {\n    if (value === false || value == null) continue;\n    let attribute = key;\n    if (value !== true) attribute += `=\"${String(value).replace(/\"/g, \"&quot;\")}\"`;\n    handledAttributes.push(attribute);\n  }\n  return handledAttributes.length > 0 ? ` ${handledAttributes.join(\" \")}` : \"\";\n}\nfunction encodeInnerHtml(str) {\n  return str.replace(/[&<>\"'/]/g, char => {\n    switch (char) {\n      case \"&\":\n        return \"&amp;\";\n      case \"<\":\n        return \"&lt;\";\n      case \">\":\n        return \"&gt;\";\n      case '\"':\n        return \"&quot;\";\n      case \"'\":\n        return \"&#x27;\";\n      case \"/\":\n        return \"&#x2F;\";\n      default:\n        return char;\n    }\n  });\n}\nfunction tagToString(tag) {\n  const attrs = propsToString(tag.props);\n  const openTag = `<${tag.tag}${attrs}>`;\n  if (!TagsWithInnerContent.includes(tag.tag)) return SelfClosingTags.includes(tag.tag) ? openTag : `${openTag}</${tag.tag}>`;\n  let content = String(tag.innerHTML || \"\");\n  if (tag.textContent) content = encodeInnerHtml(String(tag.textContent));\n  return SelfClosingTags.includes(tag.tag) ? openTag : `${openTag}${content}</${tag.tag}>`;\n}\nfunction ssrRenderTags(tags) {\n  const schema = {\n    htmlAttrs: {},\n    bodyAttrs: {},\n    tags: {\n      head: [],\n      bodyClose: [],\n      bodyOpen: []\n    }\n  };\n  for (const tag of tags) {\n    if (tag.tag === \"htmlAttrs\" || tag.tag === \"bodyAttrs\") {\n      schema[tag.tag] = {\n        ...schema[tag.tag],\n        ...tag.props\n      };\n      continue;\n    }\n    schema.tags[tag.tagPosition || \"head\"].push(tagToString(tag));\n  }\n  return {\n    headTags: schema.tags.head.join(\"\\n\"),\n    bodyTags: schema.tags.bodyClose.join(\"\\n\"),\n    bodyTagsOpen: schema.tags.bodyOpen.join(\"\\n\"),\n    htmlAttrs: propsToString(schema.htmlAttrs),\n    bodyAttrs: propsToString(schema.bodyAttrs)\n  };\n}\nasync function renderSSRHead(head) {\n  const beforeRenderCtx = {\n    shouldRender: true\n  };\n  await head.hooks.callHook(\"ssr:beforeRender\", beforeRenderCtx);\n  if (!beforeRenderCtx.shouldRender) {\n    return {\n      headTags: \"\",\n      bodyTags: \"\",\n      bodyTagsOpen: \"\",\n      htmlAttrs: \"\",\n      bodyAttrs: \"\"\n    };\n  }\n  const ctx = {\n    tags: await head.resolveTags()\n  };\n  if (head.resolvedOptions.experimentalHashHydration) {\n    ctx.tags.push({\n      tag: \"meta\",\n      props: {\n        name: \"unhead:ssr\",\n        content: computeHashes(ctx.tags.filter(t => {\n          const entry = head.headEntries().find(entry2 => entry2._i === t._e);\n          return entry?.mode !== \"server\";\n        }).map(tag => tag._h))\n      }\n    });\n  }\n  await head.hooks.callHook(\"ssr:render\", ctx);\n  const html = ssrRenderTags(ctx.tags);\n  const renderCtx = {\n    tags: ctx.tags,\n    html\n  };\n  await head.hooks.callHook(\"ssr:rendered\", renderCtx);\n  return renderCtx.html;\n}\nexport { encodeInnerHtml, propsToString, renderSSRHead, ssrRenderTags, tagToString };","map":{"version":3,"names":["TagsWithInnerContent","SelfClosingTags","computeHashes","propsToString","props","handledAttributes","key","value","Object","entries","attribute","String","replace","push","length","join","encodeInnerHtml","str","char","tagToString","tag","attrs","openTag","includes","content","innerHTML","textContent","ssrRenderTags","tags","schema","htmlAttrs","bodyAttrs","head","bodyClose","bodyOpen","tagPosition","headTags","bodyTags","bodyTagsOpen","renderSSRHead","beforeRenderCtx","shouldRender","hooks","callHook","ctx","resolveTags","resolvedOptions","experimentalHashHydration","name","filter","t","entry","headEntries","find","entry2","_i","_e","mode","map","_h","html","renderCtx"],"sources":["C:/D/Vue/polyscan/node_modules/@unhead/ssr/dist/index.mjs"],"sourcesContent":["import { TagsWithInnerContent, SelfClosingTags, computeHashes } from '@unhead/shared';\n\nfunction propsToString(props) {\n  const handledAttributes = [];\n  for (const [key, value] of Object.entries(props)) {\n    if (value === false || value == null)\n      continue;\n    let attribute = key;\n    if (value !== true)\n      attribute += `=\"${String(value).replace(/\"/g, \"&quot;\")}\"`;\n    handledAttributes.push(attribute);\n  }\n  return handledAttributes.length > 0 ? ` ${handledAttributes.join(\" \")}` : \"\";\n}\n\nfunction encodeInnerHtml(str) {\n  return str.replace(/[&<>\"'/]/g, (char) => {\n    switch (char) {\n      case \"&\":\n        return \"&amp;\";\n      case \"<\":\n        return \"&lt;\";\n      case \">\":\n        return \"&gt;\";\n      case '\"':\n        return \"&quot;\";\n      case \"'\":\n        return \"&#x27;\";\n      case \"/\":\n        return \"&#x2F;\";\n      default:\n        return char;\n    }\n  });\n}\nfunction tagToString(tag) {\n  const attrs = propsToString(tag.props);\n  const openTag = `<${tag.tag}${attrs}>`;\n  if (!TagsWithInnerContent.includes(tag.tag))\n    return SelfClosingTags.includes(tag.tag) ? openTag : `${openTag}</${tag.tag}>`;\n  let content = String(tag.innerHTML || \"\");\n  if (tag.textContent)\n    content = encodeInnerHtml(String(tag.textContent));\n  return SelfClosingTags.includes(tag.tag) ? openTag : `${openTag}${content}</${tag.tag}>`;\n}\n\nfunction ssrRenderTags(tags) {\n  const schema = { htmlAttrs: {}, bodyAttrs: {}, tags: { head: [], bodyClose: [], bodyOpen: [] } };\n  for (const tag of tags) {\n    if (tag.tag === \"htmlAttrs\" || tag.tag === \"bodyAttrs\") {\n      schema[tag.tag] = { ...schema[tag.tag], ...tag.props };\n      continue;\n    }\n    schema.tags[tag.tagPosition || \"head\"].push(tagToString(tag));\n  }\n  return {\n    headTags: schema.tags.head.join(\"\\n\"),\n    bodyTags: schema.tags.bodyClose.join(\"\\n\"),\n    bodyTagsOpen: schema.tags.bodyOpen.join(\"\\n\"),\n    htmlAttrs: propsToString(schema.htmlAttrs),\n    bodyAttrs: propsToString(schema.bodyAttrs)\n  };\n}\n\nasync function renderSSRHead(head) {\n  const beforeRenderCtx = { shouldRender: true };\n  await head.hooks.callHook(\"ssr:beforeRender\", beforeRenderCtx);\n  if (!beforeRenderCtx.shouldRender) {\n    return {\n      headTags: \"\",\n      bodyTags: \"\",\n      bodyTagsOpen: \"\",\n      htmlAttrs: \"\",\n      bodyAttrs: \"\"\n    };\n  }\n  const ctx = { tags: await head.resolveTags() };\n  if (head.resolvedOptions.experimentalHashHydration) {\n    ctx.tags.push({\n      tag: \"meta\",\n      props: {\n        name: \"unhead:ssr\",\n        content: computeHashes(\n          ctx.tags.filter((t) => {\n            const entry = head.headEntries().find((entry2) => entry2._i === t._e);\n            return entry?.mode !== \"server\";\n          }).map((tag) => tag._h)\n        )\n      }\n    });\n  }\n  await head.hooks.callHook(\"ssr:render\", ctx);\n  const html = ssrRenderTags(ctx.tags);\n  const renderCtx = { tags: ctx.tags, html };\n  await head.hooks.callHook(\"ssr:rendered\", renderCtx);\n  return renderCtx.html;\n}\n\nexport { encodeInnerHtml, propsToString, renderSSRHead, ssrRenderTags, tagToString };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}